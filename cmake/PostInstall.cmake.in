
if(APPLE)
    file(GLOB LIBRARIES "${CPACK_TEMPORARY_INSTALL_DIRECTORY}/*.dylib")
    set(MAIN_LIBRARY_NAME "lib${CPACK_PACKAGE_NAME}.dylib")
elseif(WIN32)
    file(GLOB LIBRARIES "${CPACK_TEMPORARY_INSTALL_DIRECTORY}/*.dll")
    set(MAIN_LIBRARY_NAME "${CPACK_PACKAGE_NAME}.dll")
elseif(UNIX)
    file(GLOB LIBRARIES "${CPACK_TEMPORARY_INSTALL_DIRECTORY}/*.so")
    set(MAIN_LIBRARY_NAME "lib${CPACK_PACKAGE_NAME}.so")
endif()

message(STATUS "Creating signature file ${MAIN_LIBRARY_NAME}.sig for the following files:")
foreach(LIBRARY ${LIBRARIES})
    get_filename_component(LIBRARY_NAME "${LIBRARY}" NAME)
    message(STATUS "- ${LIBRARY_NAME}")
endforeach()

execute_process(
    COMMAND python3 "@CMAKE_SOURCE_DIR@/cmake/create_signature_file.py" "${LIBRARIES}"
    OUTPUT_FILE "${CPACK_TEMPORARY_INSTALL_DIRECTORY}/${MAIN_LIBRARY_NAME}.sig"
)
